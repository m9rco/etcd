sudo: required

services:
  - docker

env:
  DOCKER_COMPOSE_VERSION: 1.8.1

before_install:
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
  - sudo mv docker-compose /usr/local/bin
  - chmod +x /usr/local/bin/docker-compose

  - docker version

  - docker build --no-cache -t m9rco/etcd:3.3.13 -f 3.3.13/Dockerfile 3.3.13/

  - docker run \
            -d \
            -p 2379:2379 \
            -p 2380:2380 \
            -p 4001:4001 \
            -p 7001:7001 \
            -v $(pwd):/home/app \
            m9rco/etcd:3.3.13 \
            -name some-etcd \
            -discovery=https://discovery.etcd.io/blahblahblahblah \
            -advertise-client-urls http://192.168.1.99:4001 \
            -initial-advertise-peer-urls http://192.168.1.99:7001
